data_study<-study(data)
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United State Of America")
test<-unique(data_study[,c("PaperID","country")])
nStudyCountry<-aggregate(PaperID~country,data=test,FUN=length)
nStudyCountry<-merge(nStudyCountry,countryCodes,by.x='country',by.y="Country",all=TRUE)
#Load Bais data
BaisFiga<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=1)
BaisFigc<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=3)
BaisData<-merge(BaisFiga[,c('iso_a2','levelFig3a','NAME')],BaisFigc[,c('iso_a2','levelFig3c')])
BaisData<-merge(BaisData,countryCodes,by.y='Alpha-2 code',by.x='iso_a2')
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha-3 code")]
# Load FAO Roundwod data
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_12-11-2023.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country")
colnames(faoData)[colnames(faoData)=="Value"]<-"Roundwood (m3)"
faoData<-faoData[order(-faoData$Roundwood),]
faoData<-faoData[,c("Alpha-3 code","Roundwood (m3)")]
# Load FAO ForestAreaPercentLand data
faoForestData<-read_xlsx(paste0(rawDataPath,"/FAOForestAreaPercentLand/Forest area as a percent of land area.xlsx"))
faoForestData[faoForestData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestData$Country<-str_to_title(faoForestData$Country)
faoForestData<-faoForestData[faoForestData$Year==2015,]
faoForestData<-merge(faoForestData[,c("Country","Year","Forest area ratio (%)")],countryCodes,by.x="Country",by.y="Country")
faoForestData<-faoForestData[,c("Alpha-3 code","Forest area ratio (%)")]
# Load FAO ForestArea data
faoForestAData<-read.csv(paste0(rawDataPath,"/FAOForestArea/Forest area.csv"))
faoForestAData[faoForestAData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestAData$Country<-str_to_title(faoForestAData$Country)
faoForestAData<-faoForestAData[faoForestAData$Year==2015,]
faoForestAData<-merge(faoForestAData[,c("Country","Year","Forest.area..1000.ha.")],countryCodes,by.x="Country",by.y="Country")
faoForestAData<-faoForestAData[,c("Alpha-3 code","Forest.area..1000.ha.")]
#Load OECD GDP spending for research
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha-3 code","TIME","GDP_RD")
gdpRD<-merge(gdpRD,countryCodes,by="Alpha-3 code")
gdpRD<-gdpRD[,c("Alpha-3 code","GDP_RD")]
BaisData
gdpRD
faoForestData
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_12-11-2023.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData
faoData["States" %in% faoData$Area,]
faoData["United States Of America" %in% faoData$Area,]
faoData$Area
faoData$Area<-str_to_title(faoData$Area)
faoData$Area
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country")
faoData$Area
countryCodes
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
print("country")
#Count number of study items per country
countryCodes$Country<-str_to_title(countryCodes$Country)
data_study<-study(data)
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United State Of America")
test<-unique(data_study[,c("PaperID","country")])
nStudyCountry<-aggregate(PaperID~country,data=test,FUN=length)
nStudyCountry<-merge(nStudyCountry,countryCodes,by.x='country',by.y="Country",all=TRUE)
#Load Bais data
BaisFiga<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=1)
BaisFigc<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=3)
BaisData<-merge(BaisFiga[,c('iso_a2','levelFig3a','NAME')],BaisFigc[,c('iso_a2','levelFig3c')])
BaisData<-merge(BaisData,countryCodes,by.y='Alpha-2 code',by.x='iso_a2')
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha-3 code")]
# Load FAO Roundwod data
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_12-11-2023.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country")
colnames(faoData)[colnames(faoData)=="Value"]<-"Roundwood (m3)"
faoData<-faoData[order(-faoData$Roundwood),]
faoData<-faoData[,c("Alpha-3 code","Roundwood (m3)")]
# Load FAO ForestAreaPercentLand data
faoForestData<-read_xlsx(paste0(rawDataPath,"/FAOForestAreaPercentLand/Forest area as a percent of land area.xlsx"))
faoForestData[faoForestData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestData$Country<-str_to_title(faoForestData$Country)
faoForestData<-faoForestData[faoForestData$Year==2015,]
faoForestData<-merge(faoForestData[,c("Country","Year","Forest area ratio (%)")],countryCodes,by.x="Country",by.y="Country")
faoForestData<-faoForestData[,c("Alpha-3 code","Forest area ratio (%)")]
# Load FAO ForestArea data
faoForestAData<-read.csv(paste0(rawDataPath,"/FAOForestArea/Forest area.csv"))
faoForestAData[faoForestAData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestAData$Country<-str_to_title(faoForestAData$Country)
faoForestAData<-faoForestAData[faoForestAData$Year==2015,]
faoForestAData<-merge(faoForestAData[,c("Country","Year","Forest.area..1000.ha.")],countryCodes,by.x="Country",by.y="Country")
faoForestAData<-faoForestAData[,c("Alpha-3 code","Forest.area..1000.ha.")]
#Load OECD GDP spending for research
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha-3 code","TIME","GDP_RD")
gdpRD<-merge(gdpRD,countryCodes,by="Alpha-3 code")
gdpRD<-gdpRD[,c("Alpha-3 code","GDP_RD")]
#Merge datasets
countryData<-merge(BaisData,gdpRD,by='Alpha-3 code',all=TRUE)
countryData<-merge(countryData,faoForestData ,by="Alpha-3 code",all=TRUE)
countryData<-merge(countryData,faoForestAData ,by="Alpha-3 code",all=TRUE)
countryData<-merge(countryData,faoData,by="Alpha-3 code",all=TRUE)
countryData<-merge(countryData,nStudyCountry,by='Alpha-3 code',all=TRUE)
#countryData<-countryData[!is.na(countryData$PaperID),]
countryData$PaperID<-as.numeric(countryData$PaperID)
countryData<-countryData[!is.na(countryData$`Forest area ratio (%)`),]
print("exit country")
countryData
countryData$`Alpha-3 code`
countryData<-country(data,countryCodes)
sortingCriteria<-"Forest.area..1000.ha."
print("Entering function : plotCountryData")
countryData<-unique(countryData[order(-countryData[,sortingCriteria]), ])
countryData$country<-factor(countryData$country,levels=as.vector(countryData[order(countryData[,sortingCriteria]), 'country']))
countryDataSubset<-rbind(countryData[1:10,],countryData[!is.na(countryData$PaperID),])
ggplot(countryDataSubset,aes(fill=PaperID,y=country,x=get(sortingCriteria),label=country))+
geom_bar(stat='identity',position='dodge',colour="gray",size=0.05)+
scale_fill_viridis(na.value="white")+
scale_y_discrete(position="left")+
labs(fill="Number of studies")+
xlab(sortingCriteria)+
theme_bw()+
theme( axis.ticks = element_blank(),
text = element_text(size=14),
axis.text.x = element_text(angle = 45))
countryDataSubset
countryData
print("country")
#Count number of study items per country
countryCodes$Country<-str_to_title(countryCodes$Country)
data_study<-study(data)
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United State Of America")
test<-unique(data_study[,c("PaperID","country")])
nStudyCountry<-aggregate(PaperID~country,data=test,FUN=length)
nStudyCountry<-merge(nStudyCountry,countryCodes,by.x='country',by.y="Country",all=TRUE)
#Load Bais data
BaisFiga<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=1)
BaisFigc<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=3)
BaisData<-merge(BaisFiga[,c('iso_a2','levelFig3a','NAME')],BaisFigc[,c('iso_a2','levelFig3c')])
BaisData<-merge(BaisData,countryCodes,by.y='Alpha-2 code',by.x='iso_a2')
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha-3 code")]
# Load FAO Roundwod data
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_12-11-2023.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country")
colnames(faoData)[colnames(faoData)=="Value"]<-"Roundwood (m3)"
faoData<-faoData[order(-faoData$Roundwood),]
faoData<-faoData[,c("Alpha-3 code","Roundwood (m3)")]
# Load FAO ForestAreaPercentLand data
faoForestData<-read_xlsx(paste0(rawDataPath,"/FAOForestAreaPercentLand/Forest area as a percent of land area.xlsx"))
faoForestData[faoForestData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestData$Country<-str_to_title(faoForestData$Country)
faoForestData<-faoForestData[faoForestData$Year==2015,]
faoForestData<-merge(faoForestData[,c("Country","Year","Forest area ratio (%)")],countryCodes,by.x="Country",by.y="Country")
faoForestData<-faoForestData[,c("Alpha-3 code","Forest area ratio (%)")]
# Load FAO ForestArea data
faoForestAData<-read.csv(paste0(rawDataPath,"/FAOForestArea/Forest area.csv"))
faoForestAData[faoForestAData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestAData$Country<-str_to_title(faoForestAData$Country)
faoForestAData<-faoForestAData[faoForestAData$Year==2015,]
faoForestAData<-merge(faoForestAData[,c("Country","Year","Forest.area..1000.ha.")],countryCodes,by.x="Country",by.y="Country")
faoForestAData<-faoForestAData[,c("Alpha-3 code","Forest.area..1000.ha.")]
#Load OECD GDP spending for research
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha-3 code","TIME","GDP_RD")
gdpRD<-merge(gdpRD,countryCodes,by="Alpha-3 code")
gdpRD<-gdpRD[,c("Alpha-3 code","GDP_RD")]
#Merge datasets
countryData<-merge(BaisData,gdpRD,by='Alpha-3 code',all=TRUE)
countryData[countryData$`Alpha-3 code`=="USA",]
countryData<-merge(countryData,faoForestData ,by="Alpha-3 code",all=TRUE)
countryData[countryData$`Alpha-3 code`=="USA",]
countryData<-merge(countryData,faoForestAData ,by="Alpha-3 code",all=TRUE)
countryData[countryData$`Alpha-3 code`=="USA",]
countryData<-merge(countryData,faoData,by="Alpha-3 code",all=TRUE)
countryData<-merge(countryData,nStudyCountry,by='Alpha-3 code',all=TRUE)
#countryData<-countryData[!is.na(countryData$PaperID),]
countryData$PaperID<-as.numeric(countryData$PaperID)
countryData<-countryData[!is.na(countryData$`Forest area ratio (%)`),]
countryData[countryData$`Alpha-3 code`=="USA",]
countryData
nStudyCountry
countryData[countryData$`Alpha-3 code`=="USA",]
nStudyCountry[nStudyCountry$`Alpha-3 code`=="USA",]
nStudyCountry
#Count number of study items per country
countryCodes$Country<-str_to_title(countryCodes$Country)
countryCodes$Country
countryCodes$Country<-str_to_title(countryCodes$Country)
data_study<-study(data)
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United State Of America")
test<-unique(data_study[,c("PaperID","country")])
nStudyCountry<-aggregate(PaperID~country,data=test,FUN=length)
nStudyCountry<-merge(nStudyCountry,countryCodes,by.x='country',by.y="Country",all=TRUE)
nStudyCountry
test
country<-function(data,countryCodes){
print("country")
#Count number of study items per country
countryCodes$Country<-str_to_title(countryCodes$Country)
data_study<-study(data)
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United States Of America")
test<-unique(data_study[,c("PaperID","country")])
nStudyCountry<-aggregate(PaperID~country,data=test,FUN=length)
nStudyCountry<-merge(nStudyCountry,countryCodes,by.x='country',by.y="Country",all=TRUE)
#Load Bais data
BaisFiga<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=1)
BaisFigc<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=3)
BaisData<-merge(BaisFiga[,c('iso_a2','levelFig3a','NAME')],BaisFigc[,c('iso_a2','levelFig3c')])
BaisData<-merge(BaisData,countryCodes,by.y='Alpha-2 code',by.x='iso_a2')
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha-3 code")]
# Load FAO Roundwod data
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_12-11-2023.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country")
colnames(faoData)[colnames(faoData)=="Value"]<-"Roundwood (m3)"
faoData<-faoData[order(-faoData$Roundwood),]
faoData<-faoData[,c("Alpha-3 code","Roundwood (m3)")]
# Load FAO ForestAreaPercentLand data
faoForestData<-read_xlsx(paste0(rawDataPath,"/FAOForestAreaPercentLand/Forest area as a percent of land area.xlsx"))
faoForestData[faoForestData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestData$Country<-str_to_title(faoForestData$Country)
faoForestData<-faoForestData[faoForestData$Year==2015,]
faoForestData<-merge(faoForestData[,c("Country","Year","Forest area ratio (%)")],countryCodes,by.x="Country",by.y="Country")
faoForestData<-faoForestData[,c("Alpha-3 code","Forest area ratio (%)")]
# Load FAO ForestArea data
faoForestAData<-read.csv(paste0(rawDataPath,"/FAOForestArea/Forest area.csv"))
faoForestAData[faoForestAData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestAData$Country<-str_to_title(faoForestAData$Country)
faoForestAData<-faoForestAData[faoForestAData$Year==2015,]
faoForestAData<-merge(faoForestAData[,c("Country","Year","Forest.area..1000.ha.")],countryCodes,by.x="Country",by.y="Country")
faoForestAData<-faoForestAData[,c("Alpha-3 code","Forest.area..1000.ha.")]
#Load OECD GDP spending for research
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha-3 code","TIME","GDP_RD")
gdpRD<-merge(gdpRD,countryCodes,by="Alpha-3 code")
gdpRD<-gdpRD[,c("Alpha-3 code","GDP_RD")]
#Merge datasets
countryData<-merge(BaisData,gdpRD,by='Alpha-3 code',all=TRUE)
countryData<-merge(countryData,faoForestData ,by="Alpha-3 code",all=TRUE)
countryData<-merge(countryData,faoForestAData ,by="Alpha-3 code",all=TRUE)
countryData<-merge(countryData,faoData,by="Alpha-3 code",all=TRUE)
countryData<-merge(countryData,nStudyCountry,by='Alpha-3 code',all=TRUE)
#countryData<-countryData[!is.na(countryData$PaperID),]
countryData$PaperID<-as.numeric(countryData$PaperID)
countryData<-countryData[!is.na(countryData$`Forest area ratio (%)`),]
print("exit country")
return(countryData)
}
countryData<-country(data,countryCodes)
sortingCriteria<-"Forest.area..1000.ha."
countryData<-country(data,countryCodes)
sortingCriteria<-"Forest.area..1000.ha."
print("Entering function : plotCountryData")
countryData<-unique(countryData[order(-countryData[,sortingCriteria]), ])
countryData$country<-factor(countryData$country,levels=as.vector(countryData[order(countryData[,sortingCriteria]), 'country']))
countryDataSubset<-rbind(countryData[1:10,],countryData[!is.na(countryData$PaperID),])
ggplot(countryDataSubset,aes(fill=PaperID,y=country,x=get(sortingCriteria),label=country))+
geom_bar(stat='identity',position='dodge',colour="gray",size=0.05)+
scale_fill_viridis(na.value="white")+
scale_y_discrete(position="left")+
labs(fill="Number of studies")+
xlab(sortingCriteria)+
theme_bw()+
theme( axis.ticks = element_blank(),
text = element_text(size=14),
axis.text.x = element_text(angle = 45))
plotCountryData(country(data),"Forest.area..1000.ha.")
test$country
plotCountryData(country(data),"Forest.area..1000.ha.")
plotCountryData(country(data,countryCodes),"Forest.area..1000.ha.")
plotCountryData(country(data,countryCodes),"Roundwood (m3)")#
plotCountryData(country(data,countryCodes),"Forest.area..1000.ha.")#Roundwood (m3)
plotCountryData(country(data,countryCodes),"Roundwood (m3)")#
#plotCountryData(country(data,countryCodes),"Forest.area..1000.ha.")#Roundwood (m3)
plotCountryData(country(data,countryCodes),"Roundwood (m3)")#
ggsave("./fig6_barplot_countries.roundwood.png",dpi=300,width=15,height=9)
plotCountryData(country(data,countryCodes),"Forest.area..1000.ha.")#Roundwood (m3)
ggsave("./fig6_barplot_countries.forestArea.png",dpi=300,width=15,height=9)
create_processes_versus_flux_size(study_freq ,"Set1","wrap")
ggsave("./figS2_scatterplot_processesFluxSize.png",dpi=300,width=15,height=9)
subs_evol<-data.frame()
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_evol<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
}
r
r
x
```
lmkmlklmk
load("../initData/initData.Rdata")
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_evol<-data.frame()
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_evol<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
}
getwd()
load("./initData/initData.Rdata")
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_evol<-data.frame()
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_evol<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
}
ggplot(subs_evol,aes(x=i,color=modelApproach,y=substitution))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
theme_bw()+
scale_color_manual(values=c("Ecosystem approach"="#2E9FDF", "Technology approach"="#FC4E07","Whole sector approach"="black"))+
theme( axis.ticks = element_blank(),text = element_text(size=14),axis.text.x = element_text(size=14,hjust=0.,vjust=0.5),axis.text.y = element_text(size=12,hjust=0.,vjust=0.5))
ggplot(subs_evol,aes(x=i,color=modelApproach,y=substitution))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
theme_bw()+
scale_color_manual(values=c("Ecosystem approach"="#2E9FDF", "Technology approach"="#FC4E07","Whole sector approach"="black"))+
theme( axis.ticks = element_blank(),text = element_text(size=14),axis.text.x = element_text(size=14,hjust=0.,vjust=0.5),axis.text.y = element_text(size=12,hjust=0.,vjust=0.5))
library(ggplot2)
ggplot(subs_evol,aes(x=i,color=modelApproach,y=substitution))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
theme_bw()+
scale_color_manual(values=c("Ecosystem approach"="#2E9FDF", "Technology approach"="#FC4E07","Whole sector approach"="black"))+
theme( axis.ticks = element_blank(),text = element_text(size=14),axis.text.x = element_text(size=14,hjust=0.,vjust=0.5),axis.text.y = element_text(size=12,hjust=0.,vjust=0.5))
subs_evol
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_val<-data.frame()
subs_n<-data.frame()
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_val<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
subs_n<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),count,na.rm=T))))
}
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_val<-data.frame()
subs_n<-data.frame()
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_val<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
subs_n<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T))))
}
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame(values,n)
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame(values=NA,n=NA)
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame(values=NA,n=NA)
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_dyn$values<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
subs_dyn$n<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T))))
}
subs_dyn$values<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame(year=seq(2002,2021,1)values=NA,n=NA)
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame(year=seq(2002,2021,1),values=NA,n=NA)
subs_dyn
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_dyn$values[i]<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
subs_dyn$n[i]<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T))))
}
rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
idx<-1
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i ,])
subs_dyn$values[idx]<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
subs_dyn$n[idx]<-rbind(subs_evol,cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T))))
idx<-i+1
}
i
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame(year=seq(2002,2021,1),values=NA,n=NA)
idx<-1
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i ,])
subs_dyn$values[idx]<-cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)))
subs_dyn$n[idx]<-cbind(i,(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T)))
idx<-i+1
}
i
idx
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i ,])
subs_dyn$values[idx]
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame(year=seq(2002,2021,1),values=NA,n=NA)
idx<-1
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i ,])
subs_dyn$values[idx]<-aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))
subs_dyn$values[idx]<-aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame()
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_dyn<-rbind(subs_evol,cbind(i,
(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T)),
(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
}
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame()
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_dyn<-rbind(subs_evol,cbind(i,cbind(
(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T)),
(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)))))
}
cbind(
(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T)),
(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))
)
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T)
data_expt_approach_yr
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T
)
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length,na.rm=T)
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),FUN=length,na.rm=T)
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length)
subs_dyn<-rbind(subs_evol,cbind(i,cbind(
(
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length)),
(aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)))))
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame()
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_dyn<-rbind(subs_evol,cbind(i,
cbind(
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length),
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))))
}
cbind(
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length),
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))
cbind(
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length),
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T))
)
cbind(
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length),
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)
)
cbind(i,
cbind(
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length),
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)
)
)
rbind(subs_evol,cbind(i,
cbind(
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length),
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)
)
)
)
#data_expt_approach$Publication_Year<-factor(data_expt_approach$Publication_Year)
subs_dyn<-data.frame()
for(i in seq(2002,2021,1)){
data_expt_approach_yr<-assignApproach(data_expt[data_expt$Publication_Year<=i  &data_expt_approach$modelApproach!="Hybrid approach",])
subs_dyn<-rbind(subs_dyn,cbind(i,
cbind(
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),length),
aggregate(data_expt_approach_yr[,c("substitution")],by=list(modelApproach=data_expt_approach_yr$modelApproach),mean,na.rm=T)
)
)
)
}
subs_dyn
ggplot(subs_dyn,aes(x=i,color=modelApproach,y=substitution))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
theme_bw()+
scale_color_manual(values=c("Ecosystem approach"="#2E9FDF", "Technology approach"="#FC4E07","Whole sector approach"="black"))+
theme( axis.ticks = element_blank(),text = element_text(size=14),axis.text.x = element_text(size=14,hjust=0.,vjust=0.5),axis.text.y = element_text(size=12,hjust=0.,vjust=0.5))
subs_dyn
subs_dyn <- subset( subs_dyn, select = -modelApproach )
subs_dyn
ggplot(subs_dyn,aes(x=i,color=modelApproach,y=substitution))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
theme_bw()+
scale_color_manual(values=c("Ecosystem approach"="#2E9FDF", "Technology approach"="#FC4E07","Whole sector approach"="black"))+
theme( axis.ticks = element_blank(),text = element_text(size=14),axis.text.x = element_text(size=14,hjust=0.,vjust=0.5),axis.text.y = element_text(size=12,hjust=0.,vjust=0.5))
subs_dyn
ggplot(subs_dyn,aes(x=year,color=modelApproach,y=substitution,size=n))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
theme_bw()+
scale_color_manual(values=c("Ecosystem approach"="#2E9FDF", "Technology approach"="#FC4E07","Whole sector approach"="black"))+
theme( axis.ticks = element_blank(),text = element_text(size=14),axis.text.x = element_text(size=14,hjust=0.,vjust=0.5),axis.text.y = element_text(size=12,hjust=0.,vjust=0.5))
colnames(subs_dyn)<-c("year","n","modelApproach","substitution")
ggplot(subs_dyn,aes(x=year,color=modelApproach,y=substitution,size=n))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
theme_bw()+
scale_color_manual(values=c("Ecosystem approach"="#2E9FDF", "Technology approach"="#FC4E07","Whole sector approach"="black"))+
theme( axis.ticks = element_blank(),text = element_text(size=14),axis.text.x = element_text(size=14,hjust=0.,vjust=0.5),axis.text.y = element_text(size=12,hjust=0.,vjust=0.5))
