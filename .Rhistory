BaisData<-merge(BaisData,countryCodes,by.y='Alpha.2.code',by.x='iso_a2')
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha.3.code","Country")]
BaisData
# Load FAO Roundwod data
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_12-11-2023.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData[,c("Area","Item","Year.Code","Unit","Value")]
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country",all=T)
faoData
BaisFiga<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=1)
BaisFigc<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=3)
BaisData<-merge(BaisFiga[,c('iso_a2','levelFig3a','NAME')],BaisFigc[,c('iso_a2','levelFig3c')])
BaisData<-merge(BaisData,countryCodes,by.y='Alpha.2.code',by.x='iso_a2',all=T)
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha.3.code","Country")]
# Load FAO Roundwod data
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_12-11-2023.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country",all=T)
colnames(faoData)[colnames(faoData)=="Value"]<-"Roundwood (m3)"
faoData<-faoData[order(-faoData$Roundwood),]
faoData<-faoData[,c("Alpha.3.code","Roundwood (m3)")]
faoForestData<-read_xlsx(paste0(rawDataPath,"/FAOForestAreaPercentLand/Forest area as a percent of land area.xlsx"))
faoForestData[faoForestData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestData$Country<-str_to_title(faoForestData$Country)
faoForestData<-faoForestData[faoForestData$Year==2015,]
faoForestData<-merge(faoForestData[,c("Country","Year","Forest area ratio (%)")],countryCodes,by.x="Country",by.y="Country")
faoForestData<-faoForestData[,c("Alpha.3.code","Forest area ratio (%)","Country")]
faoForestData
faoForestAData<-read.csv(paste0(rawDataPath,"/FAOForestArea/Forest area.csv"))
faoForestAData[faoForestAData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestAData$Country<-str_to_title(faoForestAData$Country)
faoForestAData<-faoForestAData[faoForestAData$Year==2015,]
faoForestAData<-merge(faoForestAData[,c("Country","Year","Forest.area..1000.ha.")],countryCodes,by.x="Country",by.y="Country")
faoForestAData<-faoForestAData[,c("Alpha.3.code","Forest.area..1000.ha.","Country")]
faoForestAData
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
gdpRD
#Load OECD GDP spending for research
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value","Country")]
gdpRD
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value","Country")]
gdpRD
colnames(gdpRD)<-c("Alpha.3.code","TIME","GDP_RD","Country")
gdpRD<-merge(gdpRD,countryCodes,by="Alpha.3.code")
gdpRD
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value","Country")]
colnames(gdpRD)<-c("Alpha.3.code","TIME","GDP_RD","Country")
gdpRD<-merge(gdpRD,countryCodes,by=c("Alpha.3.code","Country"))
gdpRD
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value","Country")]
colnames(gdpRD)<-c("Alpha.3.code","TIME","GDP_RD","Country")
gdpRD<-merge(gdpRD,countryCodes,by=c("Alpha.3.code","Country"),all=T)
gdpRD
BaisFiga
BaisFigc
BaisFiga<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=1)
BaisFigc<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=3)
BaisData<-merge(BaisFiga[,c('iso_a2','levelFig3a','NAME')],BaisFigc[,c('iso_a2','levelFig3c')])
BaisData<-merge(BaisData,countryCodes,by.y='Alpha.2.code',by.x='iso_a2',all=T)
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha.3.code")]
BaisData
BaisData
BaisFiga
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_12-11-2023.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country",all=T)
colnames(faoData)[colnames(faoData)=="Value"]<-"Roundwood (m3)"
faoData<-faoData[order(-faoData$Roundwood),]
faoData<-faoData[,c("Alpha.3.code","Roundwood (m3)")]
faoData
faoForestData<-read_xlsx(paste0(rawDataPath,"/FAOForestAreaPercentLand/Forest area as a percent of land area.xlsx"))
faoForestData[faoForestData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestData$Country<-str_to_title(faoForestData$Country)
faoForestData<-faoForestData[faoForestData$Year==2015,]
faoForestData<-merge(faoForestData[,c("Country","Year","Forest area ratio (%)")],countryCodes,by.x="Country",by.y="Country")
faoForestData<-faoForestData[,c("Alpha.3.code","Forest area ratio (%)")]
faoForestAData<-read.csv(paste0(rawDataPath,"/FAOForestArea/Forest area.csv"))
faoForestAData[faoForestAData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestAData$Country<-str_to_title(faoForestAData$Country)
faoForestAData<-faoForestAData[faoForestAData$Year==2015,]
faoForestAData<-merge(faoForestAData[,c("Country","Year","Forest.area..1000.ha.")],countryCodes,by.x="Country",by.y="Country")
faoForestAData<-faoForestAData[,c("Alpha.3.code","Forest.area..1000.ha.")]
#Load OECD GDP spending for research
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha.3.code","TIME","GDP_RD","Country")
gdpRD<-merge(gdpRD,countryCodes,by=c("Alpha.3.code","Country"),all=T)
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha.3.code","TIME","GDP_RD","Country")
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha.3.code","TIME","GDP_RD")
gdpRD<-merge(gdpRD,countryCodes,by="Alpha.3.code",all=T)
gdpRD<-gdpRD[,c("Alpha.3.code","GDP_RD")]
#Merge datasets
countryData<-merge(BaisData,gdpRD,by='Alpha.3.code',all=TRUE)
countryData<-merge(countryData,faoForestData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoForestAData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoData,by="Alpha.3.code",all=TRUE)
#Merge datasets
countryData<-merge(BaisData,gdpRD,by='Alpha.3.code',all=TRUE)
countryData<-merge(countryData,faoForestData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoForestAData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoData,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,countryCodes,by="Alpha.3.code",all=TRUE)
countryData
readCountryData<-function(rawDataPath){
countryCodes<-read.csv(paste0(rawDataPath,"/countryCodes/countryCodes.csv"))
countryCodes$Country<-str_to_title(countryCodes$Country)
#Load Bais data
BaisFiga<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=1)
BaisFigc<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=3)
BaisData<-merge(BaisFiga[,c('iso_a2','levelFig3a','NAME')],BaisFigc[,c('iso_a2','levelFig3c')])
BaisData<-merge(BaisData,countryCodes,by.y='Alpha.2.code',by.x='iso_a2',all=T)
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha.3.code")]
# Load FAO Roundwod data
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_12-11-2023.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country",all=T)
colnames(faoData)[colnames(faoData)=="Value"]<-"Roundwood (m3)"
faoData<-faoData[order(-faoData$Roundwood),]
faoData<-faoData[,c("Alpha.3.code","Roundwood (m3)")]
# Load FAO ForestAreaPercentLand data
faoForestData<-read_xlsx(paste0(rawDataPath,"/FAOForestAreaPercentLand/Forest area as a percent of land area.xlsx"))
faoForestData[faoForestData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestData$Country<-str_to_title(faoForestData$Country)
faoForestData<-faoForestData[faoForestData$Year==2015,]
faoForestData<-merge(faoForestData[,c("Country","Year","Forest area ratio (%)")],countryCodes,by.x="Country",by.y="Country")
faoForestData<-faoForestData[,c("Alpha.3.code","Forest area ratio (%)")]
# Load FAO ForestArea data
faoForestAData<-read.csv(paste0(rawDataPath,"/FAOForestArea/Forest area.csv"))
faoForestAData[faoForestAData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestAData$Country<-str_to_title(faoForestAData$Country)
faoForestAData<-faoForestAData[faoForestAData$Year==2015,]
faoForestAData<-merge(faoForestAData[,c("Country","Year","Forest.area..1000.ha.")],countryCodes,by.x="Country",by.y="Country")
faoForestAData<-faoForestAData[,c("Alpha.3.code","Forest.area..1000.ha.")]
#Load OECD GDP spending for research
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME=="2015",c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha.3.code","TIME","GDP_RD")
gdpRD<-merge(gdpRD,countryCodes,by="Alpha.3.code",all=T)
gdpRD<-gdpRD[,c("Alpha.3.code","GDP_RD")]
#Merge datasets
countryData<-merge(BaisData,gdpRD,by='Alpha.3.code',all=TRUE)
countryData<-merge(countryData,faoForestData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoForestAData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoData,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,countryCodes,by="Alpha.3.code",all=TRUE)
#countryData<-merge(countryData,nStudyCountry,by='Alpha-3 code',all=TRUE)
#countryData<-countryData[!is.na(countryData$PaperID),]
#countryData$PaperID<-as.numeric(countryData$PaperID)
countryData<-countryData[!is.na(countryData$`Forest area ratio (%)`),]
print("exit country")
return(countryData)
}
countryFreq<-function(data_study,countryData){
print("country")
#Count number of study items per country
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United States Of America")
nStudyCountry<-aggregate(PaperID~country,data=unique(data_study[,c("PaperID","country")]),FUN=length)
colnames(nStudyCountry)<-c("Country","nPaperID")
countryFreq<-merge(nStudyCountry,countryData,by="Country")
return(ccountryFreq)
}
#countryData<-country(data_study,countryCodes)
countryData<-readCountryData(rawDataPath)
countryFreq<-countryFreq(data_study,countryData)
countryFreq<-function(data_study,countryData){
print("country")
#Count number of study items per country
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United States Of America")
nStudyCountry<-aggregate(PaperID~country,data=unique(data_study[,c("PaperID","country")]),FUN=length)
colnames(nStudyCountry)<-c("Country","nPaperID")
countryFreq<-merge(nStudyCountry,countryData,by="Country")
return(ccountryFreq)
}
countryFreq<-countryFreq(data_study,countryData)
countryFreq<-function(data_study,countryData){
print("country")
#Count number of study items per country
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United States Of America")
nStudyCountry<-aggregate(PaperID~country,data=unique(data_study[,c("PaperID","country")]),FUN=length)
colnames(nStudyCountry)<-c("Country","nPaperID")
countryFreq<-merge(nStudyCountry,countryData,by="Country")
return(countryFreq)
}
countryFreq<-countryFreq(data_study,countryData)
countryFreq
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
runApp()
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
## Make country index Titlecase and prepare country list
data$country<-str_to_title(data$country)
data_bibliom<-bibliom(data)
data_study<-study(data)
data_expt<-expt(data)
data_expt_approach<-assignApproach(data_expt)
study_freq<-funcFreq(data_study,categoriesdf)
expt_freq<-funcFreq(data_expt,categoriesdf)
#countryData<-country(data_study,countryCodes)
countryData<-readCountryData(rawDataPath)
countryFreq<-countryFreq(data_study,countryData)
#countryData<-country(data_study,countryCodes)
countryData<-readCountryData(rawDataPath)
countryFreq<-countryFreq(data_study,countryData)
source("~/Documents/GitHub/Wood-Carbon/functions.R", echo=TRUE)
countryFreq<-countryFreq(data_study,countryData)
source("./functions.R")
countryFreq()
countryFreq<-countryFreq(data_study,countryData)
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
shiny::runApp()
#countryData<-country(data_study,countryCodes)
countryData<-readCountryData(rawDataPath)
countryFreq<-countryFreq(data_study,countryData)
countryFreq<-function(data_study,countryData){
print("country")
#Count number of study items per country
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United States Of America")
nStudyCountry<-aggregate(PaperID~country,data=unique(data_study[,c("PaperID","country")]),FUN=length)
colnames(nStudyCountry)<-c("Country","nPaperID")
countryFreq<-merge(nStudyCountry,countryData,by="Country")
return(countryFreq)
}
countryFreq<-countryFreq(data_study,countryData)
#countryData<-country(data_study,countryCodes)
countryRefData<-readCountryData(rawDataPath)
countryFreqData<-countryFreq(data_study,countryRefData)
countryFreq<-function(data_study,countryData){
print("country")
#Count number of study items per country
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United States Of America")
nStudyCountry<-aggregate(PaperID~country,data=unique(data_study[,c("PaperID","country")]),FUN=length)
colnames(nStudyCountry)<-c("Country","nPaperID")
countryFreq<-merge(nStudyCountry,countryData,by="Country")
return(countryFreq)
}
#countryData<-country(data_study,countryCodes)
countryRefData<-readCountryData(rawDataPath)
countryFreqData<-countryFreq(data_study,countryRefData)
plotCountryData(countryFreqData,"Forest.area..1000.ha.")
countryFreqData<-countryFreq(data_study,countryRefData)
countryFreqData
countryData<-countryFreqData
print("Entering function : plotCountryData")
countryData<-unique(countryData[order(-countryData[,sortingCriteria]), ])
sortingCriteria<-"Forest.area..1000.ha."
countryData<-unique(countryData[order(-countryData[,sortingCriteria]), ])
countryData$country<-factor(countryData$country,levels=as.vector(countryData[order(countryData[,sortingCriteria]), 'country']))
countryData
countryData$countr
countryData<-unique(countryData[order(-countryData[,sortingCriteria]), ])
countryData$Country<-factor(countryData$Country,levels=as.vector(countryData[order(countryData[,sortingCriteria]), 'country']))
countryDataSubset<-rbind(countryData[1:10,],countryData[!is.na(countryData$nPaperID),])
ggplot(countryDataSubset,aes(fill=nPaperID,y=country,x=get(sortingCriteria),label=country))+
geom_bar(stat='identity',position='dodge',colour="gray",size=0.05)+
scale_fill_viridis(na.value="white")+
scale_y_discrete(position="left")+
labs(fill="Number of studies")+
xlab(sortingCriteria)+
theme_bw()+
theme( axis.ticks = element_blank(),
text = element_text(size=14),
axis.text.x = element_text(angle = 45))
ggplot(countryDataSubset,aes(fill=nPaperID,y=Country,x=get(sortingCriteria),label=Country))+
geom_bar(stat='identity',position='dodge',colour="gray",size=0.05)+
scale_fill_viridis(na.value="white")+
scale_y_discrete(position="left")+
labs(fill="Number of studies")+
xlab(sortingCriteria)+
theme_bw()+
theme( axis.ticks = element_blank(),
text = element_text(size=14),
axis.text.x = element_text(angle = 45))
countryDataSubset
countryData<-countryFreqData
sortingCriteria<-"Forest.area..1000.ha."
countryData<-unique(countryData[order(-countryData[,sortingCriteria]), ])
countryData$Country<-factor(countryData$Country,levels=as.vector(countryData[order(countryData[,sortingCriteria]), 'country']))
countryData
print("Entering function : plotCountryData")
countryData<-unique(countryData[order(-countryData[,sortingCriteria]), ])
countryData$Country<-factor(countryData$Country,levels=as.vector(countryData[order(countryData[,sortingCriteria]), 'Country']))
countryDataSubset<-rbind(countryData[1:10,],countryData[!is.na(countryData$nPaperID),])
ggplot(countryDataSubset,aes(fill=nPaperID,y=Country,x=get(sortingCriteria),label=Country))+
geom_bar(stat='identity',position='dodge',colour="gray",size=0.05)+
scale_fill_viridis(na.value="white")+
scale_y_discrete(position="left")+
labs(fill="Number of studies")+
xlab(sortingCriteria)+
theme_bw()+
theme( axis.ticks = element_blank(),
text = element_text(size=14),
axis.text.x = element_text(angle = 45))
countryData<-countryFreqData
sortingCriteria<-"Forest.area..1000.ha."
countryData<-unique(countryData[order(-countryData[,sortingCriteria]), ])
countryData$Country<-factor(countryData$Country,levels=as.vector(countryData[order(countryData[,sortingCriteria]), 'Country']))
countryDataSubset<-rbind(countryData[1:10,],countryData[!is.na(countryData$nPaperID),])
countryData
ggplot(countryDataSubset,aes(fill=nPaperID,y=Country,x=get(sortingCriteria),label=Country))+
geom_bar(stat='identity',position='dodge',colour="gray",size=0.05)+
scale_fill_viridis(na.value="white")+
scale_y_discrete(position="left")+
labs(fill="Number of studies")+
xlab(sortingCriteria)+
theme_bw()+
theme( axis.ticks = element_blank(),
text = element_text(size=14),
axis.text.x = element_text(angle = 45))
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
runApp()
runApp()
countryFreqData
read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
countryFreqData
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
countryFreqData
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
#Count number of study items per country
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United States Of America")
nStudyCountry<-aggregate(PaperID~country,data=unique(data_study[,c("PaperID","country")]),FUN=length)
colnames(nStudyCountry)<-c("Country","nPaperID")
countryFreq<-merge(nStudyCountry,countryData,by="Country",all.y=TRUE)
countryFreq
countryFreq<-merge(nStudyCountry,countryData,by="Country")
countryFreq
countryFreq<-merge(nStudyCountry,countryData,by="Country",all=TRUE)
countryFreq
refYear<-2015
countryCodes<-read.csv(paste0(rawDataPath,"/countryCodes/countryCodes.csv"))
countryCodes$Country<-str_to_title(countryCodes$Country)
#Load Bais data
BaisFiga<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=1)
BaisFigc<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=3)
BaisData<-merge(BaisFiga[,c('iso_a2','levelFig3a','NAME')],BaisFigc[,c('iso_a2','levelFig3c')])
BaisData<-merge(BaisData,countryCodes,by.y='Alpha.2.code',by.x='iso_a2',all=T)
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha.3.code")]
BaisData
countryCodes
BaisData
# Load FAO Roundwod data
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_6-18-2025.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData<-faoData[faoData$Year==refYear,]
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country",all=T)
colnames(faoData)[colnames(faoData)=="Value"]<-"Roundwood (m3)"
faoData<-faoData[order(-faoData$Roundwood),]
faoData<-faoData[,c("Alpha.3.code","Roundwood (m3)")]
# Load FAO ForestAreaPercentLand data
faoForestData<-read_xlsx(paste0(rawDataPath,"/FAOForestAreaPercentLand/Forest area as a percent of land area.xlsx"))
faoForestData[faoForestData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestData$Country<-str_to_title(faoForestData$Country)
faoForestData<-faoForestData[faoForestData$Year==refYear,]
faoForestData<-merge(faoForestData[,c("Country","Year","Forest area ratio (%)")],countryCodes,by.x="Country",by.y="Country")
faoForestData<-faoForestData[,c("Alpha.3.code","Forest area ratio (%)")]
# Load FAO ForestArea data
faoForestAData<-read.csv(paste0(rawDataPath,"/FAOForestArea/Forest area.csv"))
faoForestAData[faoForestAData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestAData$Country<-str_to_title(faoForestAData$Country)
faoForestAData<-faoForestAData[faoForestAData$Year==refYear,]
faoForestAData<-merge(faoForestAData[,c("Country","Year","Forest.area..1000.ha.")],countryCodes,by.x="Country",by.y="Country")
faoForestAData<-faoForestAData[,c("Alpha.3.code","Forest.area..1000.ha.")]
#Load OECD GDP spending for research
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME==as.character(refYear),c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha.3.code","TIME","GDP_RD")
gdpRD<-merge(gdpRD,countryCodes,by="Alpha.3.code",all=T)
gdpRD<-gdpRD[,c("Alpha.3.code","GDP_RD")]
#Merge datasets
countryData<-merge(BaisData,gdpRD,by='Alpha.3.code',all=TRUE)
countryData<-merge(countryData,faoForestData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoForestAData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoData,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,countryCodes,by="Alpha.3.code",all=TRUE)
#countryData<-merge(countryData,nStudyCountry,by='Alpha-3 code',all=TRUE)
#countryData<-countryData[!is.na(countryData$PaperID),]
#countryData$PaperID<-as.numeric(countryData$PaperID)
countryData<-countryData[!is.na(countryData$`Forest area ratio (%)`),]
<-countryData[!is.na(countryData$`Forest area ratio (%)`),]
countryData
readCountryData<-function(rawDataPath){
refYear<-2015
countryCodes<-read.csv(paste0(rawDataPath,"/countryCodes/countryCodes.csv"))
countryCodes$Country<-str_to_title(countryCodes$Country)
#Load Bais data
BaisFiga<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=1)
BaisFigc<-read_xlsx(paste0(rawDataPath,"/Bais/Bais2015Data/BaisExtract.xlsx"),sheet=3)
BaisData<-merge(BaisFiga[,c('iso_a2','levelFig3a','NAME')],BaisFigc[,c('iso_a2','levelFig3c')])
BaisData<-merge(BaisData,countryCodes,by.y='Alpha.2.code',by.x='iso_a2',all=T)
BaisData<-BaisData[,c("levelFig3a","levelFig3c","Alpha.3.code")]
# Load FAO Roundwod data
faoData<-read.csv(paste0(rawDataPath,"/FAOWoodData/FAOSTAT_data_en_6-18-2025.csv"))
faoData[faoData$Area=="United Kingdom of Great Britain and Northern Ireland","Area"]<-"United Kingdom"
faoData$Area<-str_to_title(faoData$Area)
faoData<-faoData[faoData$Year==refYear,]
faoData<-merge(faoData[,c("Area","Item","Year.Code","Unit","Value")],countryCodes,by.x="Area",by.y="Country",all=T)
colnames(faoData)[colnames(faoData)=="Value"]<-"Roundwood (m3)"
faoData<-faoData[order(-faoData$Roundwood),]
faoData<-faoData[,c("Alpha.3.code","Roundwood (m3)")]
# Load FAO ForestAreaPercentLand data
faoForestData<-read_xlsx(paste0(rawDataPath,"/FAOForestAreaPercentLand/Forest area as a percent of land area.xlsx"))
faoForestData[faoForestData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestData$Country<-str_to_title(faoForestData$Country)
faoForestData<-faoForestData[faoForestData$Year==refYear,]
faoForestData<-merge(faoForestData[,c("Country","Year","Forest area ratio (%)")],countryCodes,by.x="Country",by.y="Country")
faoForestData<-faoForestData[,c("Alpha.3.code","Forest area ratio (%)")]
# Load FAO ForestArea data
faoForestAData<-read.csv(paste0(rawDataPath,"/FAOForestArea/Forest area.csv"))
faoForestAData[faoForestAData$Country=="United Kingdom of Great Britain and Northern Ireland","Country"]<-"United Kingdom"
faoForestAData$Country<-str_to_title(faoForestAData$Country)
faoForestAData<-faoForestAData[faoForestAData$Year==refYear,]
faoForestAData<-merge(faoForestAData[,c("Country","Year","Forest.area..1000.ha.")],countryCodes,by.x="Country",by.y="Country")
faoForestAData<-faoForestAData[,c("Alpha.3.code","Forest.area..1000.ha.")]
#Load OECD GDP spending for research
gdpRD<-read.csv(paste0(rawDataPath,"/UnescoData/SCN_DS_14122023043909123.csv"))
gdpRD<-gdpRD[gdpRD$TIME==as.character(refYear),c("LOCATION","TIME","Value")]
colnames(gdpRD)<-c("Alpha.3.code","TIME","GDP_RD")
gdpRD<-merge(gdpRD,countryCodes,by="Alpha.3.code",all=T)
gdpRD<-gdpRD[,c("Alpha.3.code","GDP_RD")]
#Merge datasets
countryData<-merge(BaisData,gdpRD,by='Alpha.3.code',all=TRUE)
countryData<-merge(countryData,faoForestData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoForestAData ,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,faoData,by="Alpha.3.code",all=TRUE)
countryData<-merge(countryData,countryCodes,by="Alpha.3.code",all=TRUE)
#countryData<-merge(countryData,nStudyCountry,by='Alpha-3 code',all=TRUE)
#countryData<-countryData[!is.na(countryData$PaperID),]
#countryData$PaperID<-as.numeric(countryData$PaperID)
countryData<-countryData[!is.na(countryData$`Forest area ratio (%)`),]
print("exit country")
return(countryData)
}
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
countryFreq
print("country")
#Count number of study items per country
data_study[(data_study$country=="USA"|data_study$country=="Usa"),"country"]<-str_to_title("United States Of America")
nStudyCountry<-aggregate(PaperID~country,data=unique(data_study[,c("PaperID","country")]),FUN=length)
colnames(nStudyCountry)<-c("Country","nPaperID")
countryFreqData<-merge(nStudyCountry,countryData,by="Country",all.y=TRUE)
countryFreqData
countryFreqData
sortingCriteria
sortingCriteria<-"GDP_RD"
countryFreqData[!is.na(countryFreqData[,sortingCriteria]),]
source("~/Documents/GitHub/Wood-Carbon/setup.R", echo=TRUE)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
